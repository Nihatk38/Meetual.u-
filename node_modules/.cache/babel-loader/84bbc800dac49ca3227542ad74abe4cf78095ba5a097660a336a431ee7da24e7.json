{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"h-full mt-3\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_FullCalendar = _resolveComponent(\"FullCalendar\");\n  const _component_CreateBookingDialog = _resolveComponent(\"CreateBookingDialog\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_FullCalendar, {\n    ref: \"calendarRef\",\n    options: $setup.calendarOptions\n  }, null, 8 /* PROPS */, [\"options\"])]), $setup.dialog ? (_openBlock(), _createBlock(_component_CreateBookingDialog, {\n    key: 0,\n    closeDialog: $setup.closeDialog,\n    onBookingInfo: $setup.addBooking\n  }, null, 8 /* PROPS */, [\"closeDialog\", \"onBookingInfo\"])) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","_hoisted_1","_createVNode","_component_FullCalendar","ref","options","$setup","calendarOptions","dialog","_createBlock","_component_CreateBookingDialog","closeDialog","onBookingInfo","addBooking"],"sources":["C:\\Users\\tkara.KARAHAN\\OneDrive\\Masaüstü\\Yeni klasör\\meetual.ui\\src\\components\\BookingHub\\views\\BookingHubList.vue"],"sourcesContent":["<template>\r\n  <div class=\"h-full mt-3 \">\r\n    <FullCalendar ref=\"calendarRef\" :options=\"calendarOptions\"/>\r\n\r\n  </div>\r\n  <CreateBookingDialog v-if=\"dialog\" :closeDialog=\"closeDialog\" @bookingInfo=\"addBooking\"/>\r\n</template>\r\n\r\n<script>\r\nimport {onMounted, ref} from \"vue\";\r\n\r\nimport FullCalendar from '@fullcalendar/vue3';\r\nimport dayGridPlugin from '@fullcalendar/daygrid';\r\nimport trLocale from '@fullcalendar/core/locales/tr';\r\n\r\nimport CreateBookingDialog from \"@/components/BookingHub/components/CreateBookingDialog.vue\";\r\n\r\nimport bookingData from \"@/auxiliary/userBookingInfos.json\";\r\n\r\n\r\nexport default {\r\n  name: 'BookingHubList',\r\n  components: {FullCalendar, CreateBookingDialog},\r\n  setup() {\r\n    const status = sessionStorage.getItem('user.Status');\r\n    const consultationParticipantList = ref([]);\r\n    const selectedUser = ref()\r\n    const dialog = ref(false)\r\n    const calendarOptions = ref({\r\n      plugins: [dayGridPlugin],\r\n      initialView: 'dayGridMonth',\r\n      locale: trLocale,\r\n      headerToolbar: {\r\n        left: 'prev,next today',\r\n        center: 'title',\r\n        right: 'myCustomButton'\r\n      },\r\n      customButtons: {\r\n        myCustomButton: {\r\n          text: 'Yeni Randevu Oluştur',\r\n          click() {\r\n            openDialog()\r\n          }\r\n        }\r\n      },\r\n      events: [],\r\n    })\r\n    const calendarRef = ref(null);\r\n\r\n    const getBookingData = () => {\r\n      const data = bookingData.bookingList;\r\n      const userName = sessionStorage.getItem('user.UserName');\r\n      if (status == 2) {\r\n        data.forEach(booking => {\r\n          if (booking.AdvisorName == userName && booking.IsConfirm)\r\n            calendarOptions.value.events.push(booking)\r\n        })\r\n      } else if (status == 3) {\r\n        data.forEach(booking => {\r\n          if (booking.ClientName == userName && booking.IsConfirm)\r\n            calendarOptions.value.events.push(booking)\r\n        })\r\n      }\r\n      prepareTheData()\r\n    }\r\n    const prepareTheData = () => {\r\n      calendarOptions.value.events.forEach(event => {\r\n        const start = new Date(event.start);\r\n        const end = new Date(event.end);\r\n        const name = status == 2 ? event.ClientName : event.AdvisorName\r\n\r\n        event.title = name + \"-> \" + start.toLocaleTimeString('tr-TR', {\r\n          hour: '2-digit',\r\n          minute: '2-digit'\r\n        }) + \"-\" + end.toLocaleTimeString('tr-TR', {\r\n          hour: '2-digit',\r\n          minute: '2-digit'\r\n        })\r\n      })\r\n      calendarRef.value.getApi().refetchEvents();\r\n    }\r\n\r\n    const addBooking = (booking) => {\r\n      calendarOptions.value.events.push(booking);\r\n      prepareTheData()\r\n    }\r\n    const openDialog = () => {\r\n      dialog.value = true;\r\n    }\r\n\r\n    const closeDialog = () => {\r\n      dialog.value = false;\r\n    }\r\n\r\n\r\n    onMounted(async () => {\r\n      await getBookingData()\r\n    })\r\n    return {\r\n      consultationParticipantList, selectedUser, dialog, calendarOptions, calendarRef,\r\n      openDialog, closeDialog, addBooking\r\n    }\r\n  }\r\n}\r\n</script>"],"mappings":";;EACOA,KAAK,EAAC;AAAc;;;;6DAAzBC,mBAAA,CAGM,OAHNC,UAGM,GAFJC,YAAA,CAA4DC,uBAAA;IAA9CC,GAAG,EAAC,aAAa;IAAEC,OAAO,EAAEC,MAAA,CAAAC;0CAGjBD,MAAA,CAAAE,MAAM,I,cAAjCC,YAAA,CAAyFC,8BAAA;;IAArDC,WAAW,EAAEL,MAAA,CAAAK,WAAW;IAAGC,aAAW,EAAEN,MAAA,CAAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}